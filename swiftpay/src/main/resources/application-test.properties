# ====================================
# Test Profile Configuration
# ====================================
# Uses H2 in-memory database for fast testing

# ====================================
# Database Configuration
# ====================================
# H2 In-Memory Database for Testing
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver

# H2 Console (useful for debugging tests)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# ====================================
# JPA / Hibernate Configuration
# ====================================
# Create-drop for clean test environment
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# ====================================
# Flyway Configuration
# ====================================
# Disable Flyway in tests (using ddl-auto=create-drop)
spring.flyway.enabled=false

# ====================================
# Logging Configuration
# ====================================
# Minimal logging in tests
logging.level.root=WARN
logging.level.com.swiftpay=INFO
logging.level.org.springframework.web=WARN
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN

# ====================================
# Actuator Configuration
# ====================================
management.endpoints.web.exposure.include=health
management.endpoint.health.show-details=always

# ====================================
# SwiftPay Custom Configuration
# ====================================
# Test JWT Secret
swiftpay.security.jwt.secret=test-secret-key-for-testing-only
swiftpay.security.jwt.expiration=3600000

# Mock Payment Gateway (100% success rate in tests)
swiftpay.payment-gateway.mock.enabled=true
swiftpay.payment-gateway.mock.success-rate=100.0
swiftpay.payment-gateway.mock.response-delay-ms=0