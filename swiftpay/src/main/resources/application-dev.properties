# ====================================
# Development Profile Configuration
# ====================================
# Uses PostgreSQL for development (not H2)

# ====================================
# Database Configuration
# ====================================
# PostgreSQL Development Database
spring.datasource.url=jdbc:postgresql://localhost:5432/swiftpay_dev
spring.datasource.username=swiftpay
spring.datasource.password=swiftpay123
spring.datasource.driver-class-name=org.postgresql.Driver

# HikariCP - Development Settings (smaller pool for dev)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.connection-timeout=20000

# ====================================
# JPA / Hibernate Configuration
# ====================================
# Use update in development for automatic schema updates
# WARNING: Never use this in production!
#spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.highlight_sql=true

# ====================================
# Flyway Configuration
# ====================================
# You can disable Flyway in dev if using ddl-auto=update
# Or keep it enabled and use ddl-auto=validate
spring.flyway.enabled=true
# If you want to start fresh each time in dev, uncomment:
# spring.flyway.clean-on-validation-error=true

# ====================================
# DevTools Configuration
# ====================================
spring.devtools.restart.enabled=true
spring.devtools.livereload.enabled=true

# ====================================
# Logging Configuration
# ====================================
logging.level.root=INFO
logging.level.com.swiftpay=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.flywaydb=DEBUG

# ====================================
# Actuator Configuration
# ====================================
# Expose all endpoints in development
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always

# ====================================
# SwiftPay Custom Configuration
# ====================================
# Development JWT Secret (not secure - for dev only)
swiftpay.security.jwt.secret=dev-secret-key-not-secure-for-development-only
swiftpay.security.jwt.expiration=86400000

# Mock Payment Gateway (100% success rate in dev)
swiftpay.payment-gateway.mock.enabled=true
swiftpay.payment-gateway.mock.success-rate=100.0
swiftpay.payment-gateway.mock.response-delay-ms=100

# ====================================
# Development Notes
# ====================================
# To set up PostgreSQL for development:
#
# Option 1: Using Docker (Recommended)
# docker run --name swiftpay-postgres-dev \
#   -e POSTGRES_DB=swiftpay_dev \
#   -e POSTGRES_USER=swiftpay \
#   -e POSTGRES_PASSWORD=swiftpay123 \
#   -p 5432:5432 \
#   -d postgres:15-alpine
#
# Option 2: Local PostgreSQL Installation
# 1. Install PostgreSQL 15+
# 2. Create database: CREATE DATABASE swiftpay_dev;
# 3. Create user: CREATE USER swiftpay WITH PASSWORD 'swiftpay123';
# 4. Grant privileges: GRANT ALL PRIVILEGES ON DATABASE swiftpay_dev TO swiftpay;
#
# Connect to database:
# psql -h localhost -U swiftpay -d swiftpay_dev